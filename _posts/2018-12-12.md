---

title: 观察/订阅
date: 2018-12-12
categories: vue
tags: 观察/订阅

---

## watch

```javascript
function Dep() {
	this.subs = [];
}
Dep.prototype.addSub = function (sub) {
	this.subs.push(sub);
};
Dep.prototype.notify = function () {
	this.subs.forEach(sub => sub.update());
};
function Watch(fn) {
	this.fn = fn;
}
Watcher.prototype.update = function () {
	this.fn();
}

let watch = new Watcher(() => {
	console.log(111);
});
let dep = new Dep();
// 将watch 放到数组当中
dep.addSub(watcher);
dep.addSub(watcher);
```