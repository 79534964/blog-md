---

title: 观察者模式
date: 2018-11-10 09:43:29
categories: 架构
tags: 设计模式

---

## 介绍
** 1.  发布 & 订阅 **
** 2.  一对多 或 一对一 **

## 代码演示
```javascript
// 保存状态，状态变化之后触发所有观察者对象
class Subject	{
	constructor() {
		this.state = 0;
		this.observers = [];
	}
	getState() {
		return this.state;
	}
	setState(state) {
		this.state = state;
		this.notifyAllObservers();
	}
	notifyAllObservers() {
		this.observers.forEach((observers) => {
			observers.update();
		});
	}
	attach(observers) {
		this.observers.push(observers);
	}
};

// 观察者
class Observer {
	constructor(name, subject) {
		this.name = name;
		this.subject = subject;
		this.subject.attach(this);
	}
	update() {
		console.log(`${this.name} update, state: ${this.subject.getState()}`);
	}
};

let s = new Subject();
let o1 = new Observer('o1' ,s);
s.setState(1);
```